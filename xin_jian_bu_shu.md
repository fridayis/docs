# 新建部署
---
如果您需要把镜像部署成服务，请在控制台左侧导航栏点击“部署”，并在页面上点击“新建部署”。
![](http://881471b33d4f9.cdn.sohucs.com/q_mini/newproject23.jpg)

##1. 容器配置
首先，您要选择需要部署的镜像。由于DomeOS集群采用Kubernetes架构，您可以在一次部署时选择多个镜像同时部署。每个镜像会启动一个容器，各个镜像的容器整体构成一个实例（Pod）。实例是升级回滚、扩容缩容等部署运维管理的最小单位。
![](http://881471b33d4f9.cdn.sohucs.com/q_mini/newproject24.jpg)

如果您希望部署第三方镜像仓库的镜像，请点击“其他镜像”，输入镜像名称、镜像版本和仓库地址，系统会从第三方仓库中拉取镜像进行部署。
![](http://881471b33d4f9.cdn.sohucs.com/q_mini/newproject25.jpg)

您需要对每个镜像选择镜像版本，设定运行过程环境变量并定义容器的CPU和内存限额。完成所有配置后，点击“下一步”
![](http://881471b33d4f9.cdn.sohucs.com/q_mini/newproject26.jpg)

##2. 部署设置
您需要对部署进行各项配置：
1. 实例个数：定义了部署启动时默认的实例数量。
2. 筛选主机：您需要选择部署的集群，部署环境（生产、测试）并指定主机标签（主机标签的意义，详见集群管理的主机设置）。定义了以上条件后，您可以查看筛选出了哪些主机，系统会在您筛选出的主机上部署您的应用。
3. namespace：您需要选择一个已有的namespace或新建一个namespace（namespace的意义，详见集群管理的集群设置）
4. 部署名称：指定该部署的名字
5. 创建者：意义同项目和集群的创建者。您可以选择以个人身份或某个组的身份创建部署。
6. 日志：需要输入日志文件的所在路径，并选择是否自动收集和自动删除
  
  DomeOS官方提供了flume镜像，可以用于日志收集。flume镜像地址：pub.domeos.org/domeos-flume:1.1

7. 健康检查：您可以选择某种健康检查方式，并定义健康检查指标
8. 网络模式：您可以选择使用overlay或host网络模式部署。
  
  注意：host模式下不能使用健康检查；更多host相关说明，详见“Host网络”部分。
9. 访问设置：
  
  在overlay网络下，可以选择“禁止访问”、“对内服务”、“对外服务”。对内服务的部署，只能在集群内访问；对外服务的部署，可以在集群内通过内部域名访问，在集群外通过对外访问ip+对外访问端口访问。
  
  在host网络下，可以选择“禁止访问”和“允许访问”。如果允许访问，则需要指定暴露的端口数。
  
完成所有配置后，点击“完成创建”，就可以创建您的服务了。
![](http://881471b33d4f9.cdn.sohucs.com/q_mini/newproject27.jpg)
![](http://881471b33d4f9.cdn.sohucs.com/q_mini/newproject28.jpg)
![](http://881471b33d4f9.cdn.sohucs.com/q_mini/newproject70.jpg)
